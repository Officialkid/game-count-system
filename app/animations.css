/**
 * Animation System for Recap Experience
 *
 * PRINCIPLES:
 * - Use transform + opacity ONLY (no layout shifts)
 * - Entry: ease-out (quick start, smooth deceleration)
 * - Exit: ease-in (smooth acceleration)
 * - Durations: 300-600ms
 * - No jank on low-end devices
 * - Respects prefers-reduced-motion
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* ============================================================================
     EASING UTILITIES (Tailwind extensions)
     ============================================================================ */
  
  .ease-out-entrance {
    transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
  }
  
  .ease-in-exit {
    transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
  }

  /* ============================================================================
     FADE ANIMATIONS (opacity only)
     ============================================================================ */
  
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fade-out {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  .animate-fade-in {
    animation: fade-in 400ms ease-out forwards;
  }

  .animate-fade-out {
    animation: fade-out 300ms ease-in forwards;
  }

  /* ============================================================================
     SCALE ANIMATIONS (transform scale + opacity)
     ============================================================================ */
  
  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes scale-out {
    from {
      opacity: 1;
      transform: scale(1);
    }
    to {
      opacity: 0;
      transform: scale(0.95);
    }
  }

  .animate-scale-in {
    animation: scale-in 400ms ease-out forwards;
  }

  .animate-scale-out {
    animation: scale-out 300ms ease-in forwards;
  }

  /* ============================================================================
     SLIDE ANIMATIONS (transform translateY + opacity)
     ============================================================================ */
  
  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(24px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-down {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(24px);
    }
  }

  @keyframes slide-left {
    from {
      opacity: 0;
      transform: translateX(-32px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slide-right {
    from {
      opacity: 1;
      transform: translateX(0);
    }
    to {
      opacity: 0;
      transform: translateX(32px);
    }
  }

  .animate-slide-up {
    animation: slide-up 500ms ease-out forwards;
  }

  .animate-slide-down {
    animation: slide-down 400ms ease-in forwards;
  }

  .animate-slide-left {
    animation: slide-left 500ms ease-out forwards;
  }

  .animate-slide-right {
    animation: slide-right 400ms ease-in forwards;
  }

  /* ============================================================================
     BOUNCE ANIMATIONS (celebratory, transform scale)
     ============================================================================ */
  
  @keyframes bounce-in {
    0% {
      opacity: 0;
      transform: scale(0.3);
    }
    50% {
      opacity: 1;
      transform: scale(1.05);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-bounce-in {
    animation: bounce-in 600ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  /* ============================================================================
     STAGGER ANIMATIONS (multiple elements with delay)
     ============================================================================ */
  
  .stagger-item {
    opacity: 0;
  }

  .stagger-item[data-stagger-index="0"] {
    animation: fade-in 400ms ease-out forwards;
  }

  .stagger-item[data-stagger-index="1"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 75ms;
  }

  .stagger-item[data-stagger-index="2"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 150ms;
  }

  .stagger-item[data-stagger-index="3"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 225ms;
  }

  .stagger-item[data-stagger-index="4"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 300ms;
  }

  .stagger-item[data-stagger-index="5"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 375ms;
  }

  /* Continue stagger for up to 20 items */
  .stagger-item[data-stagger-index="6"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 450ms;
  }

  .stagger-item[data-stagger-index="7"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 525ms;
  }

  .stagger-item[data-stagger-index="8"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 600ms;
  }

  .stagger-item[data-stagger-index="9"] {
    animation: fade-in 400ms ease-out forwards;
    animation-delay: 675ms;
  }

  /* ============================================================================
     COUNT ANIMATIONS (numbers rolling up)
     ============================================================================ */
  
  @keyframes count-up {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-count-up {
    animation: count-up 300ms ease-out forwards;
  }

  /* ============================================================================
     PULSE ANIMATIONS (subtle, for badges/indicators)
     ============================================================================ */
  
  @keyframes pulse-glow {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.7;
      transform: scale(1.05);
    }
  }

  .animate-pulse-glow {
    animation: pulse-glow 2000ms ease-in-out infinite;
  }

  /* ============================================================================
     CONFETTI ANIMATIONS (celebratory falling)
     ============================================================================ */
  
  @keyframes confetti-fall {
    from {
      opacity: 1;
      transform: translate3d(0, 0, 0) rotate(0deg);
    }
    to {
      opacity: 0;
      transform: translate3d(var(--x, 0), var(--y, 100px), 0) rotate(var(--rotate, 360deg));
    }
  }

  .animate-confetti {
    animation: confetti-fall 1200ms ease-in forwards;
  }

  /* ============================================================================
     PROGRESS BAR ANIMATIONS (smooth width transitions)
     ============================================================================ */
  
  .animate-progress {
    transition: width 100ms linear;
  }

  /* ============================================================================
     REDUCED MOTION PREFERENCES
     ============================================================================ */
  
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* ============================================================================
     SMOOTH TRANSITIONS (for hover states, etc.)
     ============================================================================ */
  
  .transition-smooth {
    transition-property: all;
    transition-duration: 300ms;
    transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
  }

  .transition-smooth-slow {
    transition-property: all;
    transition-duration: 500ms;
    transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
  }

  .transition-exit {
    transition-property: all;
    transition-duration: 300ms;
    transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
  }
}

/**
 * Utility Classes for Conditional Animations
 */
.will-animate {
  will-change: transform, opacity;
}

.no-animation {
  animation: none !important;
  transition: none !important;
}

/**
 * Performance optimizations for animations
 */
.gpu-accelerated {
  transform: translateZ(0);
  perspective: 1000px;
}

/**
 * Group animations (for slide transitions)
 */
.slide-exit {
  animation: fade-out 300ms ease-in forwards;
}

.slide-enter {
  animation: fade-in 400ms ease-out forwards;
}
